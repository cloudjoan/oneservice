@{
	ViewBag.Title = "待辦清單";
	Layout = "~/Views/Shared/_LayoutHome.cshtml";
}

<!--Java Script寫在js_section裡面-->
@section js_section{
	<script>
		
		//刪除清單
		function DelDetailItem(rowId) {
			$('#' + rowId).remove();
		}		
	</script>
}

	@section breadcrumb_section{
	<div class="col-lg-10">
		<h2>待辦清單</h2>
		<ol class="breadcrumb">
			<li class="breadcrumb-item">
				<a href="#">Home</a>
			</li>
			<li class="breadcrumb-item active">
				<strong>待辦清單</strong>
			</li>
		</ol>
	</div>
}

	<div class="row">
	@if (ViewBag.pIsManager)
	{
		<div class="col-lg-12">
			<div class="ibox ">
				<div class="ibox-title">
					<h5>待處理服務請求-一般服務請求</h5>
					<div class="ibox-tools">
						<a class="collapse-link">
							<i class="fa fa-chevron-up"></i>
						</a>
					</div>
				</div>
				<div class="ibox-content">
					<div>
						<select class='form-control' name='ddl_ProcessOption' onchange="$('#tableManagerList_filter').children().children().val($(this).val()); $('#tableManagerList_filter').children().children().trigger('keyup');">
							<option value='' selected="selected">全部</option>
							<option value='新建'>新建</option>
							<option value='L2處理中'>L2處理中</option>
							<option value='報價中'>報價中</option>
							<option value='3rd Party處理中'>3rd Party處理中</option>
							<option value='L3處理中'>L3處理中</option>							
							<option value='HPGCSN 申請'>HPGCSN 申請</option>
							<option value='HPGCSN 完成'>HPGCSN 完成</option>
							<option value='駁回'>駁回</option>							
						</select>
					</div>
					<div class="hr-line-dashed"></div>
					<table id="tableManagerList" class="table table-striple table-bordered table-hover dataTables-example tableQeryStyle">
						<thead>
							<tr>
								<th>SRID</th>
								<th>客戶</th>
								<th>客戶報修人</th>
								<th>說明</th>
								<th>報修管道</th>
								<th>報修類別</th>								
								<th>最後編輯日期</th>
								<th>狀態</th>
							</tr>
						</thead>
						<tbody>
							@{
								int count = 0;
								if (ViewBag.SRIDManagerListBean != null)
								{
									foreach (string[] CheckInfo in ViewBag.SRIDManagerListBean)
									{
										count++;
										<tr id='trManager@(count)'>
											<td>@CheckInfo[0]</td>											
											<td>@CheckInfo[1]</td>
											<td>@CheckInfo[2]</td>
											<td>@CheckInfo[3]</td>
											<td>@CheckInfo[4]</td>
											<td>@CheckInfo[5]</td>
											<td>@CheckInfo[6]</td>											
											<td>
												@{
													string tTypeName = string.Empty;
													string tClass = string.Empty;

													if (CheckInfo[7] == "E0001")
													{
														tClass = "btn btn-info";
														tTypeName = "新建";
													}
													else if (CheckInfo[7] == "E0002")
													{
														tClass = "btn btn-primary";
														tTypeName = "L2處理中";
													}
													else if (CheckInfo[7] == "E0003")
													{
														tClass = "btn btn-primary";
														tTypeName = "報價中";
													}
													else if (CheckInfo[7] == "E0004")
													{
														tClass = "btn btn-primary";
														tTypeName = "3rd Party處理中";
													}
													else if (CheckInfo[7] == "E0005")
													{
														tClass = "btn btn-success";
														tTypeName = "L3處理中";
													}
													else if (CheckInfo[7] == "E0012")
													{
														tClass = "btn btn-success";
														tTypeName = "HPGCSN 申請";
													}
													else if (CheckInfo[7] == "E0013")
													{
														tClass = "btn btn-success";
														tTypeName = "HPGCSN 完成";
													}
													else if (CheckInfo[7] == "E0014")
													{
														tClass = "btn btn-info";
														tTypeName = "駁回";
													}													
												}
												<button class='@tClass' type="button" onclick="window.open('@Url.Action("GenerallySR", "ServiceRequest", new { SRID = CheckInfo[0] })'); DelDetailItem('trManager@(count)');">
													@tTypeName
												</button>
											</td>
										</tr>
									}
								}
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	}
	
</div>

