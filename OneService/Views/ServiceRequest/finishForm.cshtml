
@{
    ViewBag.Title = "完成表單";
    Layout = "~/Views/Shared/_LayoutHome.cshtml";
}

<!--Java Script寫在js_section裡面-->
@section js_section{
    <script>
        $(document).ready(function () {
            jobFinish();

            $('.finish').on('hidden.bs.modal', function (e) {
                $("#ctl00_MainContent_div_approval_up").hide();
                $("#ctl00_MainContent_div_approval_bottom").hide();
                window.opener = null;
                window.open("", "_self");
                window.close();
            })

        });

        function jobFinish() {
            setTimeout(function () {
                $("#infoDialog").modal("show");

                //自動關閉視窗
                var _val = 100;
                setInterval(function () {
                    _val = _val - 4;
                    $("#countdownBar").css("width", _val + "%");
                    if (_val <= -10) $("#infoDialog").modal("hide");
                }, 100);
            }, 500);
        }       
    </script>
}

<!--Job Finsh Dialog-->
<div class="modal fade finish" id="infoDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div id="contentDiv" class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">工作完成</h4>
            </div>
            <div class="modal-body" style="overflow:auto">
                完成！
                <div class="progress">
                    <div id="countdownBar" class="progress-bar progress-bar-striped bg-info active" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>           
            <div class="modal-footer">
                <button id="closeButton" type="button" class="btn btn-lg btn-dark" data-dismiss="modal">關閉</button>
            </div>
        </div>
    </div>
</div>
